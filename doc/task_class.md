# Task Class

Task is a class to support concurrent execution of mruby/c.
When executing multiple programs concurrently, one program can control the execution state of the other programs.
By using Task, the program can be executed by giving its bytecode.


## task controlling

mruby/c has the feature of concurrently executing multiple programs.
Each concurrently running program is called a task.
The Task class provides a function to control the operation of another task from one task.

Each task is named by `name` member. Tasks can be distinguished by its name. 
Tasks can be controlled from one task to another by specifying task's name.

To name a task, assign a string value to the name member as following.

```Ruby
Task.name = "Task1"

while true
  puts "task 1"
  sleep 1
end
```

When this program is executed, this `Task1` outputs `"task1"`.

From another task, `Task1` can be controlled. When the method suspend is called, the output `"task 1"` will be stopped.
In the following program, the output of `"task1"` stops 10 seconds after the program starts. And mote, five seconds later, the output of `"task 1"` resumes.



```Ruby
sleep 10

task = Task.get("Task1");
task1.suspend

sleep 5

task1.resume
```


## new task

A new task can be created by the `create` method, given the mruby bytecode.

```Ruby
byte_code = "RITE0300\x00\x00\x00xMATZ0000IREP\x00\x00\x00\\0300\x00\x00\x00P\x00\x02\x00\a\x00\x00\x00\x00\x00\x00\x00\"\x06\x01Q\x03\x00\x01\x04\x01=\x04\x01\x01\x01\x04R\x03-\x02\x00\x01\a\x03-\x02\x01\x01%\xFF\xE5\x11\x028\x02i\x00\x01\x00\x00\aTask1: \x00\x00\x02\x00\x04puts\x00\x00\x05sleep\x00END\x00\x00\x00\x00\b"

task1 = Task.create(byte_code)
task1.run
```

`byte_code` is the generated bytecode by compiling the following program.

```Ruby
i = 0
while true
  puts "Task1: #{i += 1}"
  sleep 1
end
```

The new generated task is initially in a stopped state (`TASKSTATE_DORMANT`).
Use the `run` method to execute the task. 


<hr>


## methods

- create
- run
- rewind

<div></div>

- name=
- name
- priority=
- priority

<div></div>

- get
- current
- list
- name_list
- state

<div></div>

- suspend
- resume
- terminate
- raise

<div></div>

- join
- pass
- value

